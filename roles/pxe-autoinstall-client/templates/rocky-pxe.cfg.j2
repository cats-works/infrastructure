#!ipxe

{% if system_os == 'rocky' %}
echo Starting Rocky Linux {{ vars['rocky_' + system_os_version|string + '_version'] }} ${archl} installer
kernel http://{{ pxe_server_hostname }}/distro/rocky-{{ vars['rocky_' + system_os_version|string + '_version'] }}-{{ desired_arch }}/images/pxeboot/vmlinuz
initrd http://{{ pxe_server_hostname }}/distro/rocky-{{ vars['rocky_' + system_os_version|string + '_version'] }}-{{ desired_arch }}/images/pxeboot/initrd.img
imgargs vmlinuz inst.repo=http://{{ pxe_server_hostname }}/distro/rocky-{{ vars['rocky_' + system_os_version|string + '_version'] }}-{{ desired_arch }} inst.ks=http://{{ pxe_server_hostname }}/tftp/ks/{{ inventory_hostname }}.ks quiet inst.text
boot 
{% endif %}

{% if system_os == 'fedora' %}
echo Starting Fedora Linux {{ system_os_version }} ${archl} installer
kernel http://{{ pxe_server_hostname }}/distro/fedora-{{ system_os_version }}-{{ desired_arch }}/images/pxeboot/vmlinuz
initrd http://{{ pxe_server_hostname }}/distro/fedora-{{ system_os_version }}-{{ desired_arch }}/images/pxeboot/initrd.img
imgargs vmlinuz devfs=nomount quiet inst.repo=http://{{ pxe_server_ip }}/distro/fedora-{{ system_os_version }}-{{ desired_arch }} inst.ks=http://{{ pxe_server_ip }}/tftp/ks/{{ inventory_hostname }}.ks quiet inst.text
boot 
{% endif %}